<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>KGIU Advanced â€” Full Working File</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body{font-family:'Noto Sans KR','Inter',sans-serif;background:linear-gradient(135deg,#f8fafc 0%,#e2e8f0 100%)}
    .nav-link.active{background:linear-gradient(135deg,#0ea5e9,#0284c7);color:#fff;font-weight:600}
    .grammar-card{background:#fff;border-radius:16px;box-shadow:0 4px 6px -1px rgba(0,0,0,.1);border:1px solid #e2e8f0;margin-bottom:2rem}
    .pattern-title{background:linear-gradient(135deg,#1e40af,#3b82f6);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-weight:700}
    .example-box{background:linear-gradient(135deg,#fef3c7,#fde68a);border-left:4px solid #f59e0b;padding:16px;border-radius:8px;margin:12px 0}
    .tip-box{background:linear-gradient(135deg,#dbeafe,#bfdbfe);border-left:4px solid #3b82f6;padding:16px;border-radius:8px;margin:12px 0}
    .korean-text{font-weight:500;color:#1e40af}
    .english-text{color:#64748b;font-style:italic}
    .chapter-badge{background:linear-gradient(135deg,#10b981,#059669);color:#fff;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600}
    .video-container{background:#f8fafc;border-radius:12px;padding:20px;margin-top:16px;border:2px dashed #cbd5e1;display:none}
    .video-container.show{display:block;animation:slideDown .3s ease-out}
    @keyframes slideDown{from{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}
    .video-button{background:linear-gradient(135deg,#dc2626,#b91c1c);color:#fff;padding:8px 16px;border-radius:25px;font-weight:600;transition:all .3s;border:none;cursor:pointer}
    .video-button:hover{background:linear-gradient(135deg,#b91c1c,#991b1b);transform:translateY(-1px)}
    .resource-button{display:inline-block;background:linear-gradient(135deg,#2563eb,#1d4ed8);color:#fff;padding:8px 14px;border-radius:20px;font-weight:600;text-decoration:none}
  </style>
</head>
<body class="text-gray-800">
  <div class="flex flex-col lg:flex-row min-h-screen">
    <aside class="w-full lg:w-80 bg-white border-r border-gray-200 flex-shrink-0 shadow-lg">
      <div class="p-6 border-b border-gray-200 bg-gradient-to-r from-blue-600 to-blue-700 text-white">
        <h1 class="text-xl font-bold">ê³ ê¸‰ í•œêµ­ì–´ ë¬¸ë²•</h1>
        <p class="text-sm text-blue-100">Korean Grammar in Use - Advanced</p>
        <div class="flex gap-2 mt-3">
          <span class="chapter-badge">âœ… Fully Working</span>
          <span class="chapter-badge">ğŸ“š 22 Chapters</span>
        </div>
      </div>
      <nav id="chapter-nav" class="p-3 space-y-2 h-64 lg:h-auto lg:max-h-[calc(100vh-140px)] overflow-y-auto"></nav>
    </aside>

    <main class="flex-1 p-6 lg:p-8">
      <div class="max-w-5xl mx-auto">
        <div class="mb-8">
          <input id="search-input" type="text" placeholder="ë¬¸ë²• ê²€ìƒ‰... (ì˜ˆ: -ëŠë‹ˆ, -ë‹¤ê°€, -ë§Œí¼)"
                 class="w-full px-6 py-4 text-lg border-2 border-gray-300 rounded-full focus:ring-4 focus:ring-blue-500 focus:border-blue-500 transition shadow-lg">
        </div>
        <div class="mb-8 pb-4 border-b-2 border-gray-200" id="content-header">
          <h2 id="chapter-title" class="text-3xl font-bold text-gray-800"></h2>
          <p id="chapter-subtitle" class="text-lg text-gray-600 mt-2"></p>
        </div>
        <div id="grammar-cards-container"></div>
      </div>
    </main>
  </div>

  <!-- SAFELY-ENCODED DATA -->
  <script id="grammar-data" type="application/json">
  {
    "items": [
      {"id":101,"chapter":1,"title":"ì„ íƒì„ ë‚˜íƒ€ë‚¼ ë•Œ","subtitle":"Expressing choices","pattern":"-ëŠë‹ˆ","example":"ë¹„ ì˜¤ëŠë‹ˆ ì°¨ë¼ë¦¬ ì§‘ì— ìˆì„ë˜.","tip":"Choose the lesser of two evils. Often with 'ì°¨ë¼ë¦¬'.","videoUrl":"https://www.youtube.com/watch?v=iVArQbPOFX4","videoTitle":"How to use -ëŠë‹ˆ (Rather than...)","channel":"KoreanClass101"},
      {"id":102,"chapter":1,"title":"ì„ íƒì„ ë‚˜íƒ€ë‚¼ ë•Œ","subtitle":"Expressing choices","pattern":"-(ìœ¼)ã„¹ ë°”ì—ì•¼","example":"ëŠ¦ê²Œ ì¶œë°œí•  ë°”ì—ì•¼ ì•ˆ ê°€ëŠ” ê²Œ ë‚«ì£ .","tip":"If A is that bad, B is better.","videoUrl":"https://www.youtube.com/watch?v=fY9F_vBjMcQ","videoTitle":"-(ìœ¼)ã„¹ ë°”ì—(ì•¼)","channel":"Tammy Korean"},
      {"id":103,"chapter":1,"title":"ì„ íƒì„ ë‚˜íƒ€ë‚¼ ë•Œ","subtitle":"Expressing choices","pattern":"-ê±´ -ê±´","example":"ë¥ê±´ ì¶¥ê±´ ìš´ë™ì€ í•´ì•¼ í•´ìš”.","tip":"Regardless of A or B, same outcome.","videoUrl":"https://www.youtube.com/watch?v=BiM2f7O0xd0","videoTitle":"-ê±´ -ê±´","channel":"ê¹€ê´‘ìˆœ Korean"},

      {"id":201,"chapter":2,"title":"ì¸ìš©ì„ ë‚˜íƒ€ë‚¼ ë•Œ","subtitle":"Reporting / quoting","pattern":"-ë‹¤ë©´ì„œ(ìš”)","example":"ë‚´ì¼ ë¹„ê°€ ì˜¨ë‹¤ë©´ì„œìš”?","tip":"Confirm what you heard.","videoUrl":"https://www.youtube.com/watch?v=8MRi7HQefG0","videoTitle":"-ë‹¤ë©´ì„œ(ìš”)","channel":"GO! Billy Korean"},
      {"id":202,"chapter":2,"title":"ì¸ìš©ì„ ë‚˜íƒ€ë‚¼ ë•Œ","subtitle":"Reporting / quoting","pattern":"-ëŒ€ìš”/-ë˜ìš”","example":"ë¯¼ìˆ˜ê°€ ë‚´ì¼ ì˜¨ëŒ€ìš”.","tip":"-ëŒ€ìš” for statements, -(ì´)ë˜ìš” for quoted Q/commands.","videoUrl":"https://www.youtube.com/watch?v=Ow8EyRiAEqQ","videoTitle":"ëŒ€ìš” & (ì´)ë˜ìš”","channel":"Korean Practice Channel"},
      {"id":203,"chapter":2,"title":"ì¸ìš©ì„ ë‚˜íƒ€ë‚¼ ë•Œ","subtitle":"Reporting / quoting","pattern":"-ë‹¤ê¸°ì—","example":"ë§›ìˆë‹¤ê¸°ì— ë¨¹ì–´ ë´¤ì–´ìš”.","tip":"Did X because you heard Y.","videoUrl":"https://www.youtube.com/watch?v=sbn1tCGvFSg","videoTitle":"-ë‹¤ê¸°ì—","channel":"Tammy Korean"},
      {"id":204,"chapter":2,"title":"ì¸ìš©ì„ ë‚˜íƒ€ë‚¼ ë•Œ","subtitle":"Reporting / quoting","pattern":"-ë‹¤ë‹ˆê¹Œ(ìš”)","example":"ì•„ë‹ˆë¼ë‹ˆê¹Œìš”!","tip":"Insist on what you said.","resourceUrl":"https://www.howtostudykorean.com/unit-3-intermediate-korean-grammar/lessons-59-66/lesson-63/","resourceTitle":"Lesson 63: Quoting in Korean","resourceType":"Interactive Article"},

      {"id":301,"chapter":3,"title":"ëª…ì‚¬í™”","subtitle":"Nominalization","pattern":"-ê¸°","example":"í•œêµ­ì–´ ë°°ìš°ê¸°ê°€ ì–´ë ¤ì›Œìš”.","tip":"Nominalize verbs to activities/habits.","videoUrl":"https://www.youtube.com/watch?v=4IwwOdzmZ6Y","videoTitle":"Nominalization: -ê¸°, -ëŠ” ê²ƒ, -ìŒ/ã…","channel":"GO! Billy Korean"},
      {"id":302,"chapter":3,"title":"ëª…ì‚¬í™”","subtitle":"Nominalization","pattern":"-ìŒ/-ã…","example":"ê·¸ì˜ ì˜ëª»ì„ì´ í™•ì‹¤í•´ìš”.","tip":"Formal nominalization; common in writing.","videoUrl":"https://www.youtube.com/watch?v=4IwwOdzmZ6Y","videoTitle":"Nominalization","channel":"GO! Billy Korean"},
      {"id":303,"chapter":3,"title":"ëª…ì‚¬í™”","subtitle":"Nominalization","pattern":"-ëŠ” ê²ƒ","example":"í•œêµ­ì–´ë¥¼ ë°°ìš°ëŠ” ê²ƒì´ ì¬ë¯¸ìˆì–´ìš”.","tip":"Most common nominalizer; casual '-ëŠ” ê±°'.","videoUrl":"https://www.youtube.com/watch?v=4IwwOdzmZ6Y","videoTitle":"Nominalization","channel":"GO! Billy Korean"},
      {"id":304,"chapter":3,"title":"ëª…ì‚¬í™”","subtitle":"Nominalization","pattern":"-ë°”","example":"ì œê°€ ì•„ëŠ” ë°”ë¡œëŠ”...","tip":"Dependent noun 'ë°”' (fact/thing).","videoUrl":"https://www.youtube.com/watch?v=tPiV4q28F5Y","videoTitle":"ë°” vs ê²ƒ","channel":"GO! Billy Korean"},
      {"id":305,"chapter":3,"title":"ëª…ì‚¬í™”","subtitle":"Nominalization","pattern":"-ëŠ” ë°”","example":"ì œê°€ ë³´ëŠ” ë°”ë¡œëŠ” í‹€ë ¸ì–´ìš”.","tip":"Formal 'from what Iâ€¦'.","videoUrl":"https://www.youtube.com/watch?v=tPiV4q28F5Y","videoTitle":"ë°” vs ê²ƒ","channel":"GO! Billy Korean"},

      {"id":401,"chapter":4,"title":"ì›ì¸ê³¼ ì´ìœ ","subtitle":"Formal causes","pattern":"-ëŠ” í†µì—","example":"ì•„ì´ë“¤ì´ ë– ë“œëŠ” í†µì— ì ì„ ëª» ì¤ì–´ìš”.","tip":"Chaotic cause -> negative result.","videoUrl":"https://www.youtube.com/watch?v=WRb83QkeHw0","videoTitle":"VëŠ” í†µì—","channel":"Teacher Jinee"},
      {"id":402,"chapter":4,"title":"ì›ì¸ê³¼ ì´ìœ ","subtitle":"Formal causes","pattern":"-(ìœ¼)ë¡œ ë§ë¯¸ì•”ì•„","example":"íƒœí’ìœ¼ë¡œ ë§ë¯¸ì•”ì•„ í”¼í•´ê°€ ì»¸ì–´ìš”.","tip":"Very formal cause; news/writing.","videoUrl":"https://www.youtube.com/watch?v=LFX7S2yXAJA","videoTitle":"ìœ¼ë¡œ ë§ë¯¸ì•”ì•„","channel":"Korean Advanced Grammar"},
      {"id":403,"chapter":4,"title":"ì›ì¸ê³¼ ì´ìœ ","subtitle":"Formal causes","pattern":"-(ìœ¼)ë¡œ ì¸í•´ì„œ","example":"ì‚¬ê³ ë¡œ ì¸í•´ì„œ ì§€ê°í–ˆì–´ìš”.","tip":"Formal 'due to'.","videoUrl":"https://www.youtube.com/watch?v=ouuBf8opagA","videoTitle":"ìœ¼ë¡œ ì¸í•´ì„œ","channel":"HANIJEMI"},

      {"id":501,"chapter":5,"title":"ê°€ì •Â·ì–‘ë³´","subtitle":"Hypothesis & concession","pattern":"-(ìœ¼)ã„¹ì§€ë¼ë„","example":"ë¹„ê°€ ì˜¬ì§€ë¼ë„ ê°ˆ ê±°ì˜ˆìš”.","tip":"Formal 'even if'.","videoUrl":"https://www.youtube.com/watch?v=AdsnFvvlSx4","videoTitle":"ë”ë¼ë„ vs ã„¹ì§€ë¼ë„","channel":"GO! Billy Korean"},
      {"id":502,"chapter":5,"title":"ê°€ì •Â·ì–‘ë³´","subtitle":"Hypothesis & concession","pattern":"-ë”ë¼ë„","example":"í˜ë“¤ë”ë¼ë„ í¬ê¸°í•˜ì§€ ë§ˆì„¸ìš”.","tip":"Concessive 'even if / though'.","videoUrl":"https://www.youtube.com/watch?v=AdsnFvvlSx4","videoTitle":"ë”ë¼ë„ vs ã„¹ì§€ë¼ë„","channel":"GO! Billy Korean"},
      {"id":503,"chapter":5,"title":"ê°€ì •Â·ì–‘ë³´","subtitle":"Hypothesis & concession","pattern":"-(ìœ¼)ã„´ë“¤","example":"ëˆì´ ë§ì€ë“¤ í–‰ë³µí• ê¹Œìš”?","tip":"Rhetorical 'even if'.","resourceUrl":"https://en.dict.naver.com/kodict/#/entry/koko/3f2c3a7d6c0c4a37b4edb16f0a6d1d9a","resourceTitle":"NAVER Dictionary: -(ìœ¼)ã„´ë“¤","resourceType":"Interactive Dictionary"},
      {"id":504,"chapter":5,"title":"ê°€ì •Â·ì–‘ë³´","subtitle":"Hypothesis & concession","pattern":"-(ìœ¼)ã„¹ ë§ì •","example":"ì£½ì„ ë§ì • í¬ê¸°í•˜ì§€ ì•Šê² ì–´ìš”.","tip":"Strong resolve 'even if it means...'.","videoUrl":"https://www.youtube.com/watch?v=dUEEijhzYi0","videoTitle":"-(ìœ¼)ã„¹ ë§ì •","channel":"Korean Advanced Grammar"},

      {"id":601,"chapter":6,"title":"ìˆœì°¨ & ê¸°íšŒ","subtitle":"Sequence & opportunity","pattern":"-ê³ ì„œì•¼","example":"ìˆ™ì œë¥¼ ë‹¤ í•˜ê³ ì„œì•¼ ë†€ ìˆ˜ ìˆì–´ìš”.","tip":"Only after completing first action.","resourceUrl":"https://betterkorean.substack.com/p/20f","resourceTitle":"-ê³ ì„œì•¼","resourceType":"Interactive Article"},
      {"id":602,"chapter":6,"title":"ìˆœì°¨ & ê¸°íšŒ","subtitle":"Sequence & opportunity","pattern":"-(ìœ¼)ã„´/ëŠ” ê¹€ì—","example":"ë§ˆíŠ¸ì— ê°€ëŠ” ê¹€ì— ìš°ìœ ë„ ì‚¬ì„¸ìš”.","tip":"While youâ€™re at it.","videoUrl":"https://www.youtube.com/watch?v=H0ykZKNF0JU","videoTitle":"~ê¹€ì—","channel":"KoreanClass101"},
      {"id":603,"chapter":6,"title":"ìˆœì°¨ & ê¸°íšŒ","subtitle":"Sequence & opportunity","pattern":"-ê¸° ìœ„í•´(ì„œ)","example":"í•œêµ­ì–´ë¥¼ ë°°ìš°ê¸° ìœ„í•´ì„œ í•œêµ­ì— ì™”ì–´ìš”.","tip":"In order to / for the purpose of.","videoUrl":"https://www.youtube.com/watch?v=zVUqw32OSTI","videoTitle":"ìœ„í•´/ìœ„í•´ì„œ","channel":"Korean Grammar Channel"},

      {"id":701,"chapter":7,"title":"ì¡°ê±´ & ì˜ì¡´","subtitle":"Conditions & dependence","pattern":"-ëŠ” í•œ","example":"ì‚´ì•„ìˆëŠ” í•œ í¬ê¸°í•˜ì§€ ì•Šê² ì–´ìš”.","tip":"As long as.","videoUrl":"https://www.youtube.com/watch?v=ijmgIvPwp5k","videoTitle":"í•œ 'as long as'","channel":"GO! Billy Korean"},
      {"id":702,"chapter":7,"title":"ì¡°ê±´ & ì˜ì¡´","subtitle":"Conditions & dependence","pattern":"-ë…¸ë¼ë©´","example":"ê³„ì† ê³µë¶€í•˜ë…¸ë¼ë©´ ì‹¤ë ¥ì´ ëŠ˜ ê±°ì˜ˆìš”.","tip":"If you keep doingâ€¦ (literary).","videoUrl":"https://www.youtube.com/watch?v=UjCe3PGKtAU","videoTitle":"ë‹¤ ë³´ë©´ / ë…¸ë¼ë©´ (related)","channel":"GO! Billy Korean"},
      {"id":703,"chapter":7,"title":"ì¡°ê±´ & ì˜ì¡´","subtitle":"Conditions & dependence","pattern":"-ê¸° ë‚˜ë¦„ì´ë‹¤","example":"ì„±ê³µì€ ë…¸ë ¥í•˜ê¸° ë‚˜ë¦„ì´ì—ìš”.","tip":"It depends on how you do it.","videoUrl":"https://www.youtube.com/watch?v=ZKq_VEqSf9k","videoTitle":"~ì— ë”°ë¼ì„œ / ë‚˜ë¦„","channel":"GO! Billy Korean"},
      {"id":704,"chapter":7,"title":"ì¡°ê±´ & ì˜ì¡´","subtitle":"Conditions & dependence","pattern":"-ê¸°ì— ë‹¬ë ¤ ìˆë‹¤","example":"ê²°ê³¼ëŠ” ë‹¹ì‹ ì˜ ë…¸ë ¥ì— ë‹¬ë ¤ ìˆì–´ìš”.","tip":"Depends on / is up to.","resourceUrl":"https://www.howtostudykorean.com/unit-6/lessons-142-150/lesson-149/","resourceTitle":"~ì— ë‹¬ë ¤ ìˆë‹¤","resourceType":"Interactive Article"},

      {"id":801,"chapter":8,"title":"ë”°ë¡œÂ·ê°™ì´","subtitle":"Listing hectic actions","pattern":"-(ìœ¼)ë´ -(ìœ¼)ë´","example":"ì²­ì†Œí•˜ë´ ìš”ë¦¬í•˜ë´ ë°”ë¹ ìš”.","tip":"Busy with multiple actions.","videoUrl":"https://www.youtube.com/watch?v=VKIlNQDnkWU","videoTitle":"ë½/ë‘ ë§ë½ related","channel":"GO! Billy Korean"},
      {"id":802,"chapter":8,"title":"ë”°ë¡œÂ·ê°™ì´","subtitle":"Listing hectic actions","pattern":"-(ì´)ë©° -(ì´)ë©°","example":"ì±…ì´ë©° íœì´ë©° ëª¨ë‘ ê°€ì ¸ê°€ì„¸ìš”.","tip":"Including A and Bâ€¦","videoUrl":"https://www.youtube.com/watch?v=uejoXZnxr2k","videoTitle":"V/A-ìœ¼ë©°/ë©°","channel":"Basic Korean"},

      {"id":901,"chapter":9,"title":"ëŒ€ì¡°","subtitle":"Contrast","pattern":"-(ìœ¼)ã„´ ë°˜ë©´(ì—)","example":"í˜•ì€ í‚¤ê°€ í° ë°˜ë©´ì— ë™ìƒì€ ì‘ì•„ìš”.","tip":"Whereas / on the other hand.","videoUrl":"https://www.youtube.com/watch?v=5opH-v0kcJo","videoTitle":"ë°˜ë©´ì—","channel":"GO! Billy Korean"},
      {"id":902,"chapter":9,"title":"ëŒ€ì¡°","subtitle":"Contrast","pattern":"-ëŠ” ëŒ€ì‹ (ì—)","example":"ëˆ ëŒ€ì‹ ì— ì¹´ë“œë¡œ ê³„ì‚°í• ê²Œìš”.","tip":"Instead of / in place of.","resourceUrl":"https://www.howtostudykorean.com/unit-3-intermediate-korean-grammar/lessons-67-75/lesson-69/","resourceTitle":"ëŒ€ì‹ ì—","resourceType":"Interactive Article"},

      {"id":1001,"chapter":10,"title":"ìœ ì‚¬","subtitle":"Similarity & virtuality","pattern":"-(ìœ¼)ã„´ ì…ˆì´ë‹¤","example":"ì´ë¯¸ ëë‚œ ì…ˆì´ì—ìš”.","tip":"As good as / practically.","videoUrl":"https://www.youtube.com/watch?v=T6KJkF2nVUY","videoTitle":"ì…ˆì´ë‹¤","channel":"Teacher Jinee"},
      {"id":1002,"chapter":10,"title":"ìœ ì‚¬","subtitle":"Similarity & virtuality","pattern":"-(ìœ¼)ë‚˜ ë§ˆë‚˜","example":"ë§í•˜ë‚˜ ë§ˆë‚˜ì˜ˆìš”.","tip":"Whether or not (no use).","videoUrl":"https://www.youtube.com/watch?v=uvEpMDzhNNQ","videoTitle":"(ìœ¼)ë‚˜ ë§ˆë‚˜","channel":"GO! Billy Korean"},
      {"id":1003,"chapter":10,"title":"ìœ ì‚¬","subtitle":"Similarity & virtuality","pattern":"-ëŠ” ê²ƒê³¼ ë‹¤ë¦„ì—†ë‹¤","example":"ê±°ì§“ë§í•˜ëŠ” ê²ƒê³¼ ë‹¤ë¦„ì—†ì–´ìš”.","tip":"No different fromâ€¦","videoUrl":"https://www.youtube.com/watch?v=YzdGqMsxz5k","videoTitle":"(ì´)ë‚˜ ë‹¤ë¦„ì—†ë‹¤","channel":"Tammy Korean"},

      {"id":1101,"chapter":11,"title":"ì¶”ê°€Â·í¬í•¨","subtitle":"Addition & inclusion","pattern":"-(ì´)ê±°ë‹ˆì™€","example":"ë¹„ì‹¸ê±°ë‹ˆì™€ ë§›ë„ ì—†ì–´ìš”.","tip":"Not onlyâ€¦but also (often negative).","videoUrl":"https://www.youtube.com/watch?v=a8tL1B26ZN4","videoTitle":"ê±°ë‹ˆì™€","channel":"GO! Billy Korean"},
      {"id":1102,"chapter":11,"title":"ì¶”ê°€Â·í¬í•¨","subtitle":"Addition & inclusion","pattern":"-ì€/ëŠ” ë¬¼ë¡ ì´ê³ ","example":"í•œêµ­ì–´ëŠ” ë¬¼ë¡ ì´ê³  ì¤‘êµ­ì–´ë„ í•´ìš”.","tip":"Not to mention / of course.","videoUrl":"https://www.youtube.com/watch?v=xw3RloPlQJQ","videoTitle":"~ì€/ëŠ” ë¬¼ë¡ ì´ê³ ","channel":"Korean Grammar Channel"},
      {"id":1103,"chapter":11,"title":"ì¶”ê°€Â·í¬í•¨","subtitle":"Addition & inclusion","pattern":"-ì¡°ì°¨/-ë§ˆì €","example":"ì¹œêµ¬ì¡°ì°¨ ë‚˜ë¥¼ ë¯¿ì§€ ì•Šì•„ìš”.","tip":"Evenâ€¦ (emphatic).","videoUrl":"https://www.youtube.com/watch?v=bHLnGFM3bkw","videoTitle":"ë„/ê¹Œì§€/ë§ˆì €/ì¡°ì°¨","channel":"GO! Billy Korean"},
      {"id":1104,"chapter":11,"title":"ì¶”ê°€Â·í¬í•¨","subtitle":"Addition & inclusion","pattern":"-ëŠë‹ˆë§Œ ëª»í•˜ë‹¤","example":"ì´ê±´ ë¼ë©´ë³´ë‹¤ ëŠë‹ˆë§Œ ëª»í•´ìš”.","tip":"Not as good as (worse than).","videoUrl":"https://www.youtube.com/watch?v=HgIX6NUqWsI","videoTitle":"ëŠë‹ˆë§Œ ëª»í•˜ë‹¤ vs ë§Œ ëª»í•˜ë‹¤","channel":"Korean Language Teacher"},

      {"id":1201,"chapter":12,"title":"ìŠµê´€ & íƒœë„","subtitle":"Habits & tendencies","pattern":"-ê³¤ í•˜ë‹¤","example":"ì–´ë¦´ ë•Œ ìì£¼ ë†€ëŸ¬ ê°€ê³¤ í–ˆì–´ìš”.","tip":"Used toâ€¦ (habit).","videoUrl":"https://www.youtube.com/watch?v=CAnB-QRas_c","videoTitle":"ê³¤í•˜ë‹¤ / ê¸° ì¼ì‘¤ì´ë‹¤ / -ì•„/ì–´ ëŒ€ë‹¤","channel":"Korean TOPIK Study"},
      {"id":1202,"chapter":12,"title":"ìŠµê´€ & íƒœë„","subtitle":"Habits & tendencies","pattern":"-ì•„/ì–´ ëŒ€ë‹¤","example":"ì•„ì´ê°€ ê³„ì† ìš¸ì–´ ëŒ€ìš”.","tip":"Keep doing (often negative nuance).","videoUrl":"https://www.youtube.com/watch?v=4hqGCADL0gg","videoTitle":"~ëŒ€ë‹¤","channel":"GO! Billy Korean"},
      {"id":1203,"chapter":12,"title":"ìŠµê´€ & íƒœë„","subtitle":"Habits & tendencies","pattern":"-ê¸° ì¼ì‘¤ì´ë‹¤","example":"ê·¸ëŠ” ì•½ì†ì— ëŠ¦ê¸° ì¼ì‘¤ì˜ˆìš”.","tip":"Itâ€™s common toâ€¦ (undesirable).","videoUrl":"https://www.youtube.com/watch?v=CAnB-QRas_c","videoTitle":"ê³¤í•˜ë‹¤ / ê¸° ì¼ì‘¤ì´ë‹¤ / -ì•„/ì–´ ëŒ€ë‹¤","channel":"Korean TOPIK Study"},

      {"id":1301,"chapter":13,"title":"ì •ë„Â·ê°•ì¡°","subtitle":"Degree & emphasis","pattern":"ì—¬ê°„ -ì§€ ì•Šë‹¤","example":"ì—¬ê°„ ì–´ë µì§€ ì•Šì•„ìš”.","tip":"Very/quite (lit. not easy).","videoUrl":"https://www.youtube.com/watch?v=eMJ2vrfy-i8","videoTitle":"ì—¬ê°„","channel":"Korean Grammar Channel"},
      {"id":1302,"chapter":13,"title":"ì •ë„Â·ê°•ì¡°","subtitle":"Degree & emphasis","pattern":"-(ìœ¼)ã„¹ ë”°ë¦„ì´ë‹¤","example":"ê°ì‚¬í•  ë”°ë¦„ì…ë‹ˆë‹¤.","tip":"Only / merely (formal).","videoUrl":"https://www.youtube.com/watch?v=W_VNm0uffBM","videoTitle":"ë¿ì´ë‹¤ & ë”°ë¦„ì´ë‹¤","channel":"GO! Billy Korean"},
      {"id":1303,"chapter":13,"title":"ì •ë„Â·ê°•ì¡°","subtitle":"Degree & emphasis","pattern":"-ê¸°(ê°€) ì´ë¥¼ ë° ì—†ë‹¤","example":"ê¸°ì˜ê¸°ê°€ ì´ë¥¼ ë° ì—†ì–´ìš”.","tip":"Extremely / to the utmost.","resourceUrl":"https://studying-korean.tistory.com/197","resourceTitle":"A-ê¸°ê°€ ì´ë¥¼ ë° ì—†ë‹¤","resourceType":"Interactive Article"},

      {"id":1401,"chapter":14,"title":"ì˜ë„","subtitle":"Intentions & plans","pattern":"-(ìœ¼)ë ¤ë“¤ë‹¤","example":"ìê¾¸ ê°„ì„­í•˜ë ¤ ë“¤ì–´ìš”.","tip":"Be set on trying to do (often negative).","videoUrl":"https://www.youtube.com/watch?v=SqBA0JHaXug","videoTitle":"V-(ìœ¼)ë ¤ê³  ë“¤ë‹¤","channel":"Korean Grammar (Lecture)"},
      {"id":1402,"chapter":14,"title":"ì˜ë„","subtitle":"Intentions & plans","pattern":"-(ìœ¼)ã„¹ ì‘ì •ì´ë‹¤","example":"ì´ë²ˆì—ëŠ” ê¼­ ì„±ê³µí•  ì‘ì •ì´ì—ìš”.","tip":"Be determined / intend firmly.","resourceUrl":"https://www.howtostudykorean.com/unit-2-lower-intermediate-korean-grammar/unit-2-lessons-42-50/lesson-50/","resourceTitle":"ì˜ˆì •/ê³„íš/ì¤€ë¹„/ì‘ì •","resourceType":"Interactive Article"},

      {"id":1501,"chapter":15,"title":"ì¶”ì¸¡Â·ê°€ëŠ¥ì„±","subtitle":"Guess & probability","pattern":"-(ìœ¼)ã„¹ ë²•í•˜ë‹¤","example":"ê·¸ëŸ´ ë²•í•´ìš”.","tip":"Likely/probable.","videoUrl":"https://www.youtube.com/watch?v=OBeYMklsf64","videoTitle":"~ë²•í•˜ë‹¤","channel":"GO! Billy Korean"},
      {"id":1502,"chapter":15,"title":"ì¶”ì¸¡Â·ê°€ëŠ¥ì„±","subtitle":"Guess & probability","pattern":"-(ìœ¼)ã„¹ ë¦¬ê°€ ì—†ë‹¤","example":"ê·¸ê°€ ê±°ì§“ë§í•  ë¦¬ê°€ ì—†ì–´ìš”.","tip":"No way / impossible.","videoUrl":"https://www.youtube.com/watch?v=SIlPBJZokg4","videoTitle":"ë¦¬ê°€ ì—†ë‹¤","channel":"GO! Billy Korean"},
      {"id":1503,"chapter":15,"title":"ì¶”ì¸¡Â·ê°€ëŠ¥ì„±","subtitle":"Guess & probability","pattern":"-(ìœ¼)ã„¹ ìˆ˜ë°–ì— ì—†ë‹¤","example":"ì´ë ‡ê²Œ í•  ìˆ˜ë°–ì— ì—†ì–´ìš”.","tip":"Have no choice but to.","videoUrl":"https://www.youtube.com/watch?v=8CammJ-KCzw","videoTitle":"ëŠ” ìˆ˜ë°–ì— (ì—†ë‹¤)","channel":"Tammy Korean"},
      {"id":1504,"chapter":15,"title":"ì¶”ì¸¡Â·ê°€ëŠ¥ì„±","subtitle":"Guess & probability","pattern":"-(ìœ¼)ã„¹ ìˆ˜ê°€ ì—†ë‹¤","example":"ë¯¿ì„ ìˆ˜ê°€ ì—†ì–´ìš”.","tip":"Cannot / be unable to.","videoUrl":"https://www.youtube.com/watch?v=iiYtnzNl-mY","videoTitle":"ì§€ ëª»í•˜ë‹¤ vs (ìœ¼)ã„¹ ìˆ˜ ì—†ë‹¤","channel":"Korean Grammar Channel"},

      {"id":1601,"chapter":16,"title":"ì œì™¸","subtitle":"Exclusion","pattern":"-ì—†ì´ëŠ”","example":"ë‹¹ì‹ ì˜ ë„ì›€ ì—†ì´ëŠ” ë¶ˆê°€ëŠ¥í•´ìš”.","tip":"Without (emphasizing necessity).","resourceUrl":"https://www.howtostudykorean.com/unit-6/lessons-142-150/lesson-149/","resourceTitle":"Examples incl. ~ì—†ì´ëŠ”","resourceType":"Interactive Article"},
      {"id":1602,"chapter":16,"title":"ì œì™¸","subtitle":"Exclusion","pattern":"-ë§ê³ ëŠ”","example":"ë„ˆ ë§ê³ ëŠ” ì•„ë¬´ë„ ëª°ë¼ìš”.","tip":"Except for / apart from.","videoUrl":"https://www.youtube.com/watch?v=H0DP5OAvkPY","videoTitle":"ë§ê³ ","channel":"Korean Grammar Channel"},
      {"id":1603,"chapter":16,"title":"ì œì™¸","subtitle":"Exclusion","pattern":"-ì™¸ì—ëŠ”","example":"ì´ê²ƒ ì™¸ì—ëŠ” ë‹¤ë¥¸ ë°©ë²•ì´ ì—†ì–´ìš”.","tip":"Other than / except (formal).","resourceUrl":"https://www.howtostudykorean.com/unit-3-intermediate-korean-grammar/lessons-67-75/lesson-71/","resourceTitle":"í¬í•¨/ì œì™¸","resourceType":"Interactive Article"},

      {"id":1701,"chapter":17,"title":"ë¹„êµ","subtitle":"Comparison","pattern":"-ë§Œ ëª»í•˜ë‹¤","example":"ì´ ì˜í™”ëŠ” ì „ì‘ë§Œ ëª»í•´ìš”.","tip":"Not as good as.","videoUrl":"https://www.youtube.com/watch?v=pgdbJrozqp4","videoTitle":"Në§Œ ëª»í•˜ë‹¤","channel":"Teacher Jinee"},
      {"id":1702,"chapter":17,"title":"ë¹„êµ","subtitle":"Comparison","pattern":"-ë§Œí•˜ë‹¤","example":"ì´ ì¼ì€ í•  ë§Œí•´ìš”.","tip":"Worth doing / decent enough.","videoUrl":"https://www.youtube.com/watch?v=JYcXa6oW3_g","videoTitle":"ë§Œí•˜ë‹¤","channel":"GO! Billy Korean"},
      {"id":1703,"chapter":17,"title":"ë¹„êµ","subtitle":"Comparison","pattern":"-ì— ë¹„í•´ì„œ","example":"ì‘ë…„ì— ë¹„í•´ì„œ ë§ì´ ì¢‹ì•„ì¡Œì–´ìš”.","tip":"Compared to / in comparison with.","resourceUrl":"https://www.howtostudykorean.com/unit-3-intermediate-korean-grammar/lessons-67-75/lesson-70/","resourceTitle":"ë¹„êµí•˜ë‹¤/ë¹„í•˜ë‹¤","resourceType":"Interactive Article"},

      {"id":1801,"chapter":18,"title":"ì‹œê°„ í‘œí˜„","subtitle":"Time expressions","pattern":"-ë‹¤ê°€","example":"ê³µë¶€í•˜ë‹¤ê°€ ì ë“¤ì—ˆì–´ìš”.","tip":"While doing A, (interruption/change).","videoUrl":"https://www.youtube.com/watch?v=VXUCeUwVC2Q","videoTitle":"ë™ì•ˆ/ë©´ì„œ/ë‹¤ê°€","channel":"GO! Billy Korean"},
      {"id":1802,"chapter":18,"title":"ì‹œê°„ í‘œí˜„","subtitle":"Time expressions","pattern":"-ë‹¤ê°€ëŠ”","example":"ì´ë ‡ê²Œ í•˜ë‹¤ê°€ëŠ” ì‹¤íŒ¨í•  ê±°ì˜ˆìš”.","tip":"If you keep doing A, negative result.","videoUrl":"https://www.youtube.com/watch?v=NNlhAN1awWY","videoTitle":"ë‹¤ê°€ëŠ”","channel":"GO! Billy Korean"},
      {"id":1803,"chapter":18,"title":"ì‹œê°„ í‘œí˜„","subtitle":"Time expressions","pattern":"-ë‹¤ ë³´ë‹ˆê¹Œ","example":"ê³„ì† ê³µë¶€í•˜ë‹¤ ë³´ë‹ˆê¹Œ ì‹¤ë ¥ì´ ëŠ˜ì—ˆì–´ìš”.","tip":"After doing for a while, realized/result.","videoUrl":"https://www.youtube.com/watch?v=EbFdl4hJoWg","videoTitle":"ë‹¤ ë³´ë‹ˆê¹Œ","channel":"GO! Billy Korean"},
      {"id":1804,"chapter":18,"title":"ì‹œê°„ í‘œí˜„","subtitle":"Time expressions","pattern":"-ë”ë‹ˆ","example":"ì•„í”„ë”ë‹ˆ ê²°êµ­ ë³‘ì›ì— ê°”ì–´ìš”.","tip":"Observed A and then (result).","videoUrl":"https://www.youtube.com/watch?v=T68WpJPbO6c","videoTitle":"ë”ë‹ˆ","channel":"GO! Billy Korean"},
      {"id":1805,"chapter":18,"title":"ì‹œê°„ í‘œí˜„","subtitle":"Time expressions","pattern":"-ëŠ” ëŒ€ë¡œ","example":"ë„ì°©í•˜ëŠ” ëŒ€ë¡œ ì—°ë½í•˜ì„¸ìš”.","tip":"As soon as / immediately when.","videoUrl":"https://www.youtube.com/watch?v=rVaJDs_aaGQ","videoTitle":"ëŒ€ë¡œ","channel":"GO! Billy Korean"},
      {"id":1806,"chapter":18,"title":"ì‹œê°„ í‘œí˜„","subtitle":"Time expressions","pattern":"-ëŠ” ë§Œí¼","example":"ë…¸ë ¥í•˜ëŠ” ë§Œí¼ ê²°ê³¼ê°€ ë‚˜ì˜¬ ê±°ì˜ˆìš”.","tip":"As much as / to the extent that.","videoUrl":"https://www.youtube.com/watch?v=ssblWhKO4gM","videoTitle":"ë§Œí¼","channel":"GO! Billy Korean"},

      {"id":1901,"chapter":19,"title":"ì›ì¸ í‘œí˜„","subtitle":"Cause expressions","pattern":"-ëŠ” ë°”ëŒì—","example":"ë¹„ê°€ ì˜¤ëŠ” ë°”ëŒì— ì†Œí’ì´ ì·¨ì†Œëì–´ìš”.","tip":"Unexpected external cause -> negative result.","videoUrl":"https://www.youtube.com/watch?v=XTZSG4BqC1s","videoTitle":"ëŠ” ë°”ëŒì—","channel":"GO! Billy Korean"},
      {"id":1902,"chapter":19,"title":"ì›ì¸ í‘œí˜„","subtitle":"Cause expressions","pattern":"-ëŠ” íƒ“ì—","example":"êµí†µì²´ì¦ íƒ“ì— ëŠ¦ì—ˆì–´ìš”.","tip":"Because of / slight blame nuance.","videoUrl":"https://www.youtube.com/watch?v=ZOShgYxqm5U","videoTitle":"íƒ“ì—","channel":"GO! Billy Korean"},
      {"id":1903,"chapter":19,"title":"ì›ì¸ í‘œí˜„","subtitle":"Cause expressions","pattern":"-ëŠ” ê¹Œë‹­ì—","example":"ê·¸ëŸ° ê¹Œë‹­ì— ê²°ì •ì„ ë°”ê¿¨ì–´ìš”.","tip":"Formal reason/cause (writing).","resourceUrl":"https://www.howtostudykorean.com/unit-6/lessons-142-150/lesson-147/","resourceTitle":"~ëŠ” ë°”ëŒì— (related)","resourceType":"Interactive Article"},

      {"id":2001,"chapter":20,"title":"ì •ë„ í‘œí˜„","subtitle":"Degree expressions","pattern":"-ëŠ” ì •ë„","example":"ìš¸ ì •ë„ë¡œ ê°ë™í–ˆì–´ìš”.","tip":"To the extent thatâ€¦","resourceUrl":"https://www.koreantopik.com/2017/05/l2g42-av-grammar-to-extent-thatexpress.html","resourceTitle":"(ìœ¼)ã„¹ ì •ë„(ë¡œ)","resourceType":"Interactive Article"},
      {"id":2002,"chapter":20,"title":"ì •ë„ í‘œí˜„","subtitle":"Degree expressions","pattern":"-ì•„/ì–´ì„œ","example":"ë„ˆë¬´ ì¶”ì›Œì„œ ë‚˜ê°ˆ ìˆ˜ ì—†ì–´ìš”.","tip":"Because/so (basic cause).","resourceUrl":"https://www.howtostudykorean.com/unit-2-lower-intermediate-korean-grammar/unit-2-lessons-34-41/lesson-37/","resourceTitle":"Lesson 37: ~ì•„/ì–´ì„œ","resourceType":"Interactive Article"},
      {"id":2003,"chapter":20,"title":"ì •ë„ í‘œí˜„","subtitle":"Degree expressions","pattern":"-(ìœ¼)ã„¹ ì •ë„ë¡œ","example":"ì£½ì„ ì •ë„ë¡œ ì•„íŒ ì–´ìš”.","tip":"To such an extent thatâ€¦ (emphatic).","resourceUrl":"https://www.koreantopik.com/2017/05/l2g42-av-grammar-to-extent-thatexpress.html","resourceTitle":"(ìœ¼)ã„¹ ì •ë„(ë¡œ)","resourceType":"Interactive Article"},

      {"id":2101,"chapter":21,"title":"ìƒí™© í‘œí˜„","subtitle":"Situation expressions","pattern":"-ëŠ” ì¤‘","example":"ì§€ê¸ˆ ê³µë¶€í•˜ëŠ” ì¤‘ì´ì—ìš”.","tip":"In the middle of doing.","videoUrl":"https://www.youtube.com/watch?v=QBZFSeXZf_E","videoTitle":"ì¤‘ / ì¤‘ì´ë‹¤","channel":"GO! Billy Korean"},
      {"id":2102,"chapter":21,"title":"ìƒí™© í‘œí˜„","subtitle":"Situation expressions","pattern":"-ëŠ” ê°€ìš´ë°","example":"ë§ì€ ì‚¬ëŒë“¤ì´ ì§€ì¼œë³´ëŠ” ê°€ìš´ë° ì—°ì„¤í–ˆì–´ìš”.","tip":"While / among (formal).","videoUrl":"https://www.youtube.com/watch?v=orR7t8Orgm0","videoTitle":"ê°€ìš´ë°","channel":"GO! Billy Korean"},
      {"id":2103,"chapter":21,"title":"ìƒí™© í‘œí˜„","subtitle":"Situation expressions","pattern":"-ëŠ” ë™ì•ˆ","example":"ë°©í•™ ë™ì•ˆ ì—¬í–‰ì„ ê°”ì–´ìš”.","tip":"During / while.","videoUrl":"https://www.youtube.com/watch?v=IvRfhNO2vCk","videoTitle":"ëŠ” ë™ì•ˆì—","channel":"Korean Grammar Channel"},
      {"id":2104,"chapter":21,"title":"ìƒí™© í‘œí˜„","subtitle":"Situation expressions","pattern":"-ëŠ” ë„ì¤‘ì—","example":"íšŒì˜í•˜ëŠ” ë„ì¤‘ì— ì „í™”ê°€ ì™”ì–´ìš”.","tip":"In the middle of (interruption).","videoUrl":"https://www.youtube.com/watch?v=J-m5LHbHdAI","videoTitle":"ëŠ” ë„ì¤‘ì— / ê¸¸ì— / ëŒ€ë¡œ","channel":"Tammy Korean"},

      {"id":2201,"chapter":22,"title":"ê¸°íƒ€ ê³ ê¸‰ í‘œí˜„","subtitle":"Other advanced expressions","pattern":"-ëŠ” ê¸¸ì—","example":"ì§‘ì— ê°€ëŠ” ê¸¸ì— ë§ˆíŠ¸ì— ë“¤ë €ì–´ìš”.","tip":"On the way (to).","videoUrl":"https://www.youtube.com/watch?v=Zrh-chSOD0M","videoTitle":"ê¸¸ì—","channel":"GO! Billy Korean"},
      {"id":2202,"chapter":22,"title":"ê¸°íƒ€ ê³ ê¸‰ í‘œí˜„","subtitle":"Other advanced expressions","pattern":"-ëŠ” ì°¸ì—","example":"ì²­ì†Œí•˜ëŠ” ì°¸ì— ì •ë¦¬ë„ í–ˆì–´ìš”.","tip":"While at it / taking the opportunity.","resourceUrl":"https://www.howtostudykorean.com/unit-7/lessons-151-158/lesson-156/","resourceTitle":"(ìœ¼)ë ¤ëŠ”/ë˜ ì°¸","resourceType":"Interactive Article"},
      {"id":2203,"chapter":22,"title":"ê¸°íƒ€ ê³ ê¸‰ í‘œí˜„","subtitle":"Other advanced expressions","pattern":"-ê³ ì„œ","example":"ìˆ™ì œë¥¼ í•˜ê³ ì„œ ë†€ì•˜ì–´ìš”.","tip":"After doing (completion first).","resourceUrl":"https://betterkorean.substack.com/p/20f","resourceTitle":"-ê³ ì„œì•¼ / -ê³ ì„œ","resourceType":"Interactive Article"}
    ]
  }
  </script>

  <script>
    function getEmbedUrl(url){
      try{
        const u = new URL(url);
        if(u.hostname.includes('youtu.be')){
          return 'https://www.youtube.com/embed/' + u.pathname.replace('/','');
        }
        if(u.searchParams.get('v')){
          return 'https://www.youtube.com/embed/' + u.searchParams.get('v');
        }
        return url;
      }catch(e){ return url; }
    }

    const data = JSON.parse(document.getElementById('grammar-data').textContent).items;
    const itemsByChapter = data.reduce((acc, it)=>{ (acc[it.chapter]??=[]).push(it); return acc; }, {});
    const chapters = Object.keys(itemsByChapter).map(n => ({
      chapter: parseInt(n,10),
      title: itemsByChapter[n][0].title,
      subtitle: itemsByChapter[n][0].subtitle
    })).sort((a,b)=>a.chapter-b.chapter);

    const chapterNav = document.getElementById('chapter-nav');
    const cardsContainer = document.getElementById('grammar-cards-container');
    const chapterTitleEl = document.getElementById('chapter-title');
    const chapterSubtitleEl = document.getElementById('chapter-subtitle');

    function renderNav(){
      chapterNav.innerHTML = chapters.map(c => (
        `<a href="#" class="nav-link block px-4 py-3 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition" data-chapter="${c.chapter}">
          <span class="font-semibold text-blue-600">${c.chapter}.</span> ${c.title}
          <div class="text-xs text-gray-500 mt-1">${c.subtitle}</div>
        </a>`
      )).join('');
    }

    function showVideo(id){
      document.querySelectorAll('.video-container').forEach(v => {
        v.classList.remove('show');
        const iframe = v.querySelector('iframe');
        if(iframe) iframe.src='';
      });
      const item = data.find(x=>x.id===id);
      if(!item || !item.videoUrl) return;
      const box = document.getElementById('video-'+id);
      if(!box) return;
      box.classList.add('show');
      const iframe = box.querySelector('iframe');
      if(iframe){ iframe.src = getEmbedUrl(item.videoUrl); }
    }

    function createCard(item){
      const hasVideo = !!item.videoUrl;
      const hasRes = !!item.resourceUrl;
      let resourceSection = '';
      if(hasVideo){
        resourceSection =
        `<div class="mt-6 pt-4 border-t border-gray-200">
          <div class="flex justify-between items-center">
            <div class="flex-1">
              <h4 class="font-semibold text-gray-700 mb-1">ğŸ“¹ Video Lesson</h4>
              <p class="text-sm text-gray-600">${item.channel || ''}</p>
            </div>
            <button onclick="showVideo(${item.id})" class="video-button">â–¶ Show Video</button>
          </div>
          <div id="video-${item.id}" class="video-container">
            <div><iframe width="100%" height="400" src="" frameborder="0" allowfullscreen class="rounded-lg"></iframe></div>
            <div class="mt-3 text-sm text-gray-600">
              <strong>Video:</strong> ${item.videoTitle || ''}<br>
              <strong>Channel:</strong> ${item.channel || ''}
            </div>
          </div>
        </div>`;
      } else if (hasRes){
        resourceSection =
        `<div class="mt-6 pt-4 border-t border-gray-200">
          <a href="${item.resourceUrl}" target="_blank" class="resource-button">ğŸ“š ${item.resourceType || 'Learn more'}</a>
          <div class="text-sm text-gray-600 mt-2"><strong>Resource:</strong> ${item.resourceTitle || ''}</div>
        </div>`;
      }
      return `
        <div class="grammar-card p-8">
          <h3 class="pattern-title text-3xl mb-4">${item.pattern}</h3>
          <p class="text-lg text-gray-600 mb-4">Korean Grammar Pattern</p>
          <div class="example-box">
            <h4 class="font-semibold text-amber-800 mb-2">ğŸ“ Example</h4>
            <div class="korean-text text-lg mb-2">${item.example}</div>
            <div class="english-text">Example usage</div>
          </div>
          <div class="tip-box">
            <h4 class="font-semibold text-blue-800 mb-2">ğŸ’¡ Usage Tip</h4>
            <p class="text-gray-700">${item.tip}</p>
          </div>
          ${resourceSection}
        </div>`;
    }

    function showChapter(chNum){
      const list = (itemsByChapter[chNum] || []);
      if(list.length){
        chapterTitleEl.textContent = chNum + '. ' + list[0].title;
        chapterSubtitleEl.textContent = list[0].subtitle;
      }else{
        chapterTitleEl.textContent = '';
        chapterSubtitleEl.textContent = '';
      }
      cardsContainer.innerHTML = list.map(createCard).join('');
      document.querySelectorAll('.nav-link').forEach(a=>a.classList.remove('active'));
      const active = document.querySelector(`[data-chapter="${chNum}"]`);
      if(active) active.classList.add('active');
    }

    renderNav();
    if(chapters.length){ showChapter(chapters[0].chapter); }

    chapterNav.addEventListener('click', (e)=>{
      e.preventDefault();
      const link = e.target.closest('.nav-link');
      if(!link) return;
      const ch = parseInt(link.dataset.chapter,10);
      showChapter(ch);
    });

    document.getElementById('search-input').addEventListener('input', (e)=>{
      const q = e.target.value.trim().toLowerCase();
      if(!q){
        if(chapters.length){ showChapter(chapters[0].chapter); }
        return;
      }
      const filtered = data.filter(it =>
        it.pattern.toLowerCase().includes(q) ||
        it.example.toLowerCase().includes(q) ||
        it.tip.toLowerCase().includes(q)
      );
      chapterTitleEl.textContent = 'ê²€ìƒ‰ ê²°ê³¼';
      chapterSubtitleEl.textContent = '"' + q + '" ê²€ìƒ‰ ê²°ê³¼';
      const html = filtered.map(createCard).join('');
      document.getElementById('grammar-cards-container').innerHTML = html || '<div class="p-8 text-gray-500">ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
    });
  </script>
</body>
</html>
